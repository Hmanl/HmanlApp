{"version":3,"sources":["layout.js"],"names":["cc","Class","extends","Component","properties","maxRate","onLoad","rate","node","width","height","nCanvas","director","getScene","children","sys","isMobile","maxWidth","zoom","maxHeight","scale"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGL;;;AAGAC,gBAAW;AACP;;;AAGAC,iBAAS;AAJF,KANN;;AAaL;;;;AAIAC,YAAQ,kBAAY;AAChB,YAAIC,OAAO,KAAKC,IAAL,CAAUC,KAAV,GAAkB,KAAKD,IAAL,CAAUE,MAAvC;AACA,YAAIC,UAAUX,GAAGY,QAAH,CAAYC,QAAZ,GAAuBC,QAAvB,CAAgC,CAAhC,CAAd;;AAEA;AACA;AACA,YAAGd,GAAGe,GAAH,CAAOC,QAAV,EAAmB;AACf,gBAAGL,QAAQF,KAAR,GAAgBE,QAAQD,MAAxB,GAAiCH,IAApC,EAAyC;AACrC,oBAAIU,WAAWN,QAAQD,MAAR,GAAiBH,IAAjB,GAAwB,KAAKF,OAA5C;AACA,qBAAKG,IAAL,CAAUE,MAAV,GAAmBC,QAAQD,MAA3B;AACA,qBAAKF,IAAL,CAAUC,KAAV,GAAkBQ,WAAWN,QAAQF,KAAnB,GAA2BE,QAAQF,KAAnC,GAA2CQ,QAA7D;AACH,aAJD,MAIK;AACD,oBAAIC,OAAOP,QAAQF,KAAR,GAAgB,KAAKD,IAAL,CAAUC,KAArC;AAAA,oBACIU,YAAY,KAAKX,IAAL,CAAUE,MAAV,GAAmB,KAAKL,OADxC;AAAA,oBAEIK,SAASC,QAAQD,MAAR,GAAiBQ,IAF9B;AAGAP,wBAAQS,KAAR,GAAgBF,IAAhB;AACA,qBAAKV,IAAL,CAAUE,MAAV,GAAmBA,SAASS,SAAT,GAAqBA,SAArB,GAAiCT,MAApD;AACH;AACJ,SAZD,MAYK;AACD,iBAAKF,IAAL,CAAUE,MAAV,GAAmBC,QAAQD,MAA3B;AACA,iBAAKF,IAAL,CAAUC,KAAV,GAAkBE,QAAQD,MAAR,GAAiBH,IAAnC;AACH;AACJ;AAvCI,CAAT;AAyCA","file":"layout.js","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    /**\r\n     * 属性\r\n     */\r\n    properties:{\r\n        /**\r\n         * 最大比率(宽度缩放)\r\n         */\r\n        maxRate: 1.5,\r\n    },\r\n\r\n    /**\r\n     * 初始化\r\n     * 约定此节点的宽和高就是设计分辨率\r\n     */\r\n    onLoad: function () {\r\n        var rate = this.node.width / this.node.height;\r\n        var nCanvas = cc.director.getScene().children[0];\r\n\r\n        // console.log('layout节点尺寸',this.node.width,this.node.height);\r\n        // console.log('canvas即屏幕尺寸',nCanvas.width,nCanvas.height);\r\n        if(cc.sys.isMobile){\r\n            if(nCanvas.width / nCanvas.height > rate){\r\n                var maxWidth = nCanvas.height * rate * this.maxRate;\r\n                this.node.height = nCanvas.height;\r\n                this.node.width = maxWidth > nCanvas.width ? nCanvas.width : maxWidth;    \r\n            }else{\r\n                var zoom = nCanvas.width / this.node.width,\r\n                    maxHeight = this.node.height * this.maxRate,\r\n                    height = nCanvas.height / zoom;\r\n                nCanvas.scale = zoom;\r\n                this.node.height = height > maxHeight ? maxHeight : height;\r\n            }\r\n        }else{\r\n            this.node.height = nCanvas.height;\r\n            this.node.width = nCanvas.height * rate;\r\n        }\r\n    },\r\n});\r\n/////"]}