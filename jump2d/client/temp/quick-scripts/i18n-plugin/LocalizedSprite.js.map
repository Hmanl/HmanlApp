{"version":3,"sources":["LocalizedSprite.js"],"names":["SpriteFrameSet","require","cc","Class","extends","Component","editor","executeInEditMode","inspector","menu","properties","spriteFrameSet","default","type","onLoad","fetchRender","sprite","getComponent","Sprite","updateSprite","window","i18n","curLang","getSpriteFrameByLang","lang","i","length","language","spriteFrame","error"],"mappings":";;;;;;AAAA,IAAMA,iBAAiBC,QAAQ,gBAAR,CAAvB;;AAEAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,YAAQ;AACJC,2BAAmB,IADf;AAEJC,mBAAW,+CAFP;AAGJC,cAAM;AAHF,KAHH;;AASLC,gBAAY;AACRC,wBAAgB;AACZC,qBAAS,EADG;AAEZC,kBAAMb;AAFM;AADR,KATP;;AAgBLc,UAhBK,oBAgBK;AACN,aAAKC,WAAL;AACH,KAlBI;AAoBLA,eApBK,yBAoBU;AACX,YAAIC,SAAS,KAAKC,YAAL,CAAkBf,GAAGgB,MAArB,CAAb;AACA,YAAIF,MAAJ,EAAY;AACR,iBAAKA,MAAL,GAAcA,MAAd;AACA,iBAAKG,YAAL,CAAkBC,OAAOC,IAAP,CAAYC,OAA9B;AACA;AACH;AACJ,KA3BI;AA6BLC,wBA7BK,gCA6BiBC,IA7BjB,EA6BuB;AACxB,aAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAI,KAAKd,cAAL,CAAoBe,MAAxC,EAAgD,EAAED,CAAlD,EAAqD;AACjD,gBAAI,KAAKd,cAAL,CAAoBc,CAApB,EAAuBE,QAAvB,KAAoCH,IAAxC,EAA8C;AAC1C,uBAAO,KAAKb,cAAL,CAAoBc,CAApB,EAAuBG,WAA9B;AACH;AACJ;AACJ,KAnCI;AAqCLT,gBArCK,wBAqCSQ,QArCT,EAqCmB;AACpB,YAAI,CAAC,KAAKX,MAAV,EAAkB;AACdd,eAAG2B,KAAH,CAAS,iEAAT;AACA;AACH;;AAED,YAAID,cAAc,KAAKL,oBAAL,CAA0BI,QAA1B,CAAlB;;AAEA,YAAI,CAACC,WAAD,IAAgB,KAAKjB,cAAL,CAAoB,CAApB,CAApB,EAA4C;AACxCiB,0BAAc,KAAKjB,cAAL,CAAoB,CAApB,EAAuBiB,WAArC;AACH;;AAED,aAAKZ,MAAL,CAAYY,WAAZ,GAA0BA,WAA1B;AACH;AAlDI,CAAT","file":"LocalizedSprite.js","sourceRoot":"..\\..\\..\\..\\..\\packages\\i18n\\runtime-scripts","sourcesContent":["const SpriteFrameSet = require('SpriteFrameSet');\n\ncc.Class({\n    extends: cc.Component,\n\n    editor: {\n        executeInEditMode: true,\n        inspector: 'packages://i18n/inspector/localized-sprite.js',\n        menu: 'i18n/LocalizedSprite'\n    },\n\n    properties: {\n        spriteFrameSet: {\n            default: [],\n            type: SpriteFrameSet\n        }\n    },\n\n    onLoad () {\n        this.fetchRender();\n    },\n\n    fetchRender () {\n        let sprite = this.getComponent(cc.Sprite);\n        if (sprite) {\n            this.sprite = sprite;\n            this.updateSprite(window.i18n.curLang);\n            return;\n        }\n    },\n\n    getSpriteFrameByLang (lang) {\n        for (let i = 0; i < this.spriteFrameSet.length; ++i) {\n            if (this.spriteFrameSet[i].language === lang) {\n                return this.spriteFrameSet[i].spriteFrame;\n            }\n        }\n    },\n\n    updateSprite (language) {\n        if (!this.sprite) {\n            cc.error('Failed to update localized sprite, sprite component is invalid!');\n            return;\n        }\n\n        let spriteFrame = this.getSpriteFrameByLang(language);\n\n        if (!spriteFrame && this.spriteFrameSet[0]) {\n            spriteFrame = this.spriteFrameSet[0].spriteFrame;\n        }\n\n        this.sprite.spriteFrame = spriteFrame;\n    }\n});"]}